<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"/>

    <!--禁止电话号码和邮箱识别-->
    <meta content="telephone=no,email=no" name="format-detection"/>

    <!--TODO:添加一个网页标题-->
    <title>每日好店</title>

    <!--TODO:改成你想要的缩放比例-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
    <script src="./flexible.js"></script>
    <script>
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                let scriptElement = document.createElement('script')
                scriptElement.src = src
                scriptElement.addEventListener('load', resolve)
                document.documentElement.appendChild(scriptElement)
            })
        }

        function happen(obj, type, config) {
            return new Promise((resolve, reject) => {
                obj.addEventListener(type, resolve, config)
            })
        }

        void async function () {
            let [obj, event] = await Promise.all([
                fetch('https://static001.geekbang.org/univer/classes/js_dev/data/getRecommendationPageData').then(response => response.json()),
                happen(document, 'DOMContentLoaded'),
                loadScript('./main.js')
            ])
            window.render(obj, document.body)
        }()
    </script>
    <link rel="stylesheet" href="./app.css">

    <script type="text/javascript">
        //关闭选择
        //document.addEventListener("selectstart",function(e){ e.preventDefault(); });
        //避免鼠标变成文本选择形状
        //document.addEventListener("mousedown",function(e){ e.preventDefault(); });
        //避免上下滚屏
        document.addEventListener("touchmove", function (e) {
            if (e.touches.length === 1) {
                e.preventDefault();
            }
        }, {passive: false});

    </script>
</head>
<body></body>
</html>
