(function(n){function t(t){for(var e,u,a=t[0],l=t[1],c=t[2],f=0,p=[];f<a.length;f++)u=a[f],o[u]&&p.push(o[u][0]),o[u]=0;for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(n[e]=l[e]);s&&s(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var n,t=0;t<i.length;t++){for(var r=i[t],e=!0,a=1;a<r.length;a++){var l=r[a];0!==o[l]&&(e=!1)}e&&(i.splice(t--,1),n=u(u.s=r[0]))}return n}var e={},o={app:0},i=[];function u(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return n[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=n,u.c=e,u.d=function(n,t,r){u.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},u.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},u.t=function(n,t){if(1&t&&(n=u(n)),8&t)return n;if(4&t&&"object"===typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)u.d(r,e,function(t){return n[t]}.bind(null,e));return r},u.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return u.d(t,"a",t),t},u.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},u.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var s=l;i.push([0,"chunk-vendors"]),r()})({0:function(n,t,r){n.exports=r("56d7")},"034f":function(n,t,r){"use strict";var e=r("64a9"),o=r.n(e);o.a},"56d7":function(n,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var e,o,i=r("2b0e"),u=function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{attrs:{id:"app"}},[r("OthelloGame")],1)},a=[],l=function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",[r("Board",{attrs:{cells:n.animateBoard,cellClick:n.cellClick},on:{flipEnd:n.onFlipEnd}}),r("p",[n._v("比分 黑:"+n._s(n.blackCount)+",白:"+n._s(n.whiteCount))]),r("p",[n._v("\n    第"+n._s(this.turns.length)+"轮\n    "),r("span",[n._v(n._s(this.turns.length%2?"黑":"白"))]),r("span",{directives:[{name:"show",rawName:"v-show",value:n.curTurn.isPass,expression:"curTurn.isPass"}]},[n._v("pass")])]),n.curTurn.isGameEnd?r("p",[n._v("游戏结束")]):n._e(),r("p",[r("button",{on:{click:n.regret}},[n._v("悔棋")])])],1)},c=[],s=r("768b"),f=(r("7514"),r("bd86")),p=(r("ac4d"),r("8a81"),r("ac6a"),r("2638")),d=r.n(p),h=function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"cell",class:n.pieceClass,on:{transitionend:n.onTransitionEnd}})},v=[],b={1:"piece-black",2:"piece-white"},m={props:["color"],data:function(){return{flip:0}},computed:{pieceClass:function(){var n=this.flip,t=this.color;return 0===t?"":0===n?b[t]:1===n?[b[3-t],"flip"]:b[t]}},watch:{color:function(n,t){n+t===3&&(this.flip=1)}},methods:{onTransitionEnd:function(){var n=this,t=[{from:1,handler:function(){return n.flip=2}},{from:2,handler:function(){n.flip=0,n.$emit("flipEnd")}}].find(function(t){var r=t.from;return r===n.flip});t&&t.handler()}}},y=m,g=(r("f11d"),r("2877")),_=Object(g["a"])(y,h,v,!1,null,"5aebabc3",null),w=_.exports,O={functional:!0,render:function(n,t){var r=t.props,e=t.listeners;return n("div",{class:"board"},[r.cells.map(function(t,o){return n(w,d()([{key:o,attrs:{color:t}},{nativeOn:{click:function(){return r.cellClick&&r.cellClick(o)}}},{},{on:{flipEnd:e.flipEnd}}]))})])}},k=O,x=(r("a1f3"),Object(g["a"])(k,e,o,!1,null,"18046d0a",null)),j=x.exports,T=r("d225"),E=r("b0b4"),S=function(){function n(t,r,e){Object(T["a"])(this,n),this.board=t,this.color=r,this._computedStatus=C(t,r,e)}return Object(E["a"])(n,[{key:"isPass",get:function(){return this._computedStatus.isPass}},{key:"isGameEnd",get:function(){return this._computedStatus.isGameEnd}},{key:"moves",get:function(){return this._computedStatus.moves}}],[{key:"createFromMove",value:function(n){var t=n.pos,r=n.board,e=n.color,o=this;return new o(r,e,t<0)}}]),n}();function C(n,t,r){var e=!1,o=!1,i=[],u=3-t,a=P(n,t);if(r&&0===a.length?o=!0:n.some(function(n){return n<=0})||(o=!0),!o)if(e=0===a.length,e)i.push({pos:-1,board:n,color:u});else{var l=!0,c=!1,s=void 0;try{for(var f,p=a[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var d=f.value,h=d.pos,v=d.board,b=d.diff;i.push({pos:h,board:v,diff:b,color:u})}}catch(m){c=!0,s=m}finally{try{l||null==p.return||p.return()}finally{if(c)throw s}}}return{isPass:e,isGameEnd:o,moves:i}}function P(n,t){for(var r=[],e=0,o=n.length;e<o;e++){var i=F(e,t,n);if(i.length>0){var u=n.slice(),a=!0,l=!1,c=void 0;try{for(var s,f=J(i)[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var p=s.value;u[p]=t}}catch(d){l=!0,c=d}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}r.push({pos:e,diff:i,board:u})}}return r}var M=[[0,1],[0,-1],[1,1],[1,0],[1,-1],[-1,1],[-1,0],[-1,-1]];function F(n,t,r){var e=[],o=r[n];if(o>0)return[];for(var i=0,u=M;i<u.length;i++){var a=u[i],l=n,c=[];while(G(l=$(l,a))){var s=r[l];if(s<=0)break;if(s===t){c.length&&e.push(c);break}c.push(l)}}return e.length>0?[n,e]:[]}function G(n){return 0<=n&&n<64}function $(n,t){var r=Object(s["a"])(t,2),e=r[0],o=r[1],i=A(n),u=i.x,a=i.y;return u+=e,a+=o,[u,a].every(function(n){return 0<=n&&n<8})?B({x:u,y:a}):-1}function B(n){var t=n.x,r=n.y;return t+8*r}function A(n){var t=n%8,r=Math.floor(n/8);return{x:t,y:r}}function J(n){return Array.isArray(n)?n.flatMap(J):n}var N={components:{Board:j},data:function(){return{diff:null,turns:[new S([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1,!1)]}},computed:{curTurn:function(){return this.turns[this.turns.length-1]},animateBoard:function(){var n=this.curTurn,t=n.board,r=n.color,e=this.diff;if(!e)return t;t=t.slice();var o=!0,i=!1,u=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value;t[c]=r}}catch(s){i=!0,u=s}finally{try{o||null==l.return||l.return()}finally{if(i)throw u}}return t},blackCount:function(){return this.curTurn.board.filter(function(n){return 1===n}).length},whiteCount:function(){return this.curTurn.board.filter(function(n){return 2===n}).length}},watch:Object(f["a"])({},"curTurn",{immediate:!0,handler:function(n){var t=this;n.isPass&&(console.log("pass turn ",this.turns.length),setTimeout(function(){return t.turns.push(S.createFromMove(n.moves[0]))},3e3))}}),methods:{cellClick:function(n){if(!this.diff){var t=this.curTurn.moves.find(function(t){var r=t.pos;return r===n});if(t)if(t.diff){var r=function n(){var r=!1,e=!0,o=!1,c=void 0;try{for(var s,f=i[Symbol.iterator]();!(e=(s=f.next()).done);e=!0){var p=s.value;l in p&&(a.push(p[l]),r=!0)}}catch(d){o=!0,c=d}finally{try{e||null==f.return||f.return()}finally{if(o)throw c}}r?(l++,setTimeout(n,200)):(u.diff=null,u.turns.push(S.createFromMove(t)))},e=Object(s["a"])(t.diff,2),o=e[0],i=e[1],u=this,a=u.diff=[o],l=0;setTimeout(r,200)}else this.turns.push(S.createFromMove(t))}},regret:function(){this.turns.length>1&&this.turns.pop()},onFlipEnd:function(){console.log("onFlipEnd:",arguments)}}},q=N,z=Object(g["a"])(q,l,c,!1,null,null,null),D=z.exports,H={name:"app",components:{OthelloGame:D}},I=H,K=(r("034f"),Object(g["a"])(I,u,a,!1,null,null,null)),L=K.exports;i["a"].config.productionTip=!1,i["a"].config.devtools=!0,new i["a"]({render:function(n){return n(L)}}).$mount("#app")},"64a9":function(n,t,r){},7019:function(n,t,r){},a1f3:function(n,t,r){"use strict";var e=r("7019"),o=r.n(e);o.a},a80b:function(n,t,r){},f11d:function(n,t,r){"use strict";var e=r("a80b"),o=r.n(e);o.a}});
//# sourceMappingURL=app.ba2733fd.js.map